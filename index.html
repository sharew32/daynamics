<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Challenge Solver | Expert Help</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
       <!-- MathJax for beautiful equations -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- EmailJS for notifications (ONLY LOAD ONCE) -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body>
    <div class="welcome-container">
        <div class="hero-section">
            <h1>Welcome to This Problem Solver Site</h1>
            <img src="sharew.jpeg" alt="Physics diagram" class="hero-image">
             <a href="https://sharew32.github.io/daynamics/calculator.html" target="_blank" rel="noopener"> Scientific Calculator</a>
            <p class="subtitle">Your expert assistant for challenging  questions</p>
        </div>
        
        <div class="welcome-text">
            <p>Hello! This site is your dedicated question assistant, here to help you solve problems with <strong>detailed step-by-step solutions</strong> and <strong>clear explanations</strong>. Whether you're working on kinematics, dynamics, or any other physics topic, I'll provide:</p>
        </div>
        
        <div class="features">
            <div class="feature-box">
                <div class="feature-icon"><i class="fas fa-calculator"></i></div>
                <div class="feature-text">
                    <h3>Complete solutions</h3>
                    <p>With all mathematical steps shown</p>
                </div>
            </div>
            
            <div class="feature-box">
                <div class="feature-icon"><i class="fas fa-project-diagram"></i></div>
                <div class="feature-text">
                    <h3>Beautiful formatting</h3>
                    <p>Professional equations and diagrams</p>
                </div>
            </div>
            
            <div class="feature-box">
                <div class="feature-icon"><i class="fas fa-lightbulb"></i></div>
                <div class="feature-text">
                    <h3>Thorough explanations</h3>
                    <p>Key concepts clearly explained</p>
                </div>
            </div>
            
            <div class="feature-box">
                <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                <div class="feature-text">
                    <h3>Visual aids</h3>
                    <p>To enhance understanding</p>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h2>How to get the best help:</h2>
            <ul class="instructions-list">
                <li><i class="fas fa-check-circle"></i> Provide <strong>all given information</strong> from your problem</li>
                <li><i class="fas fa-check-circle"></i> Include any <strong>diagrams or figures</strong> if available</li>
                <li><i class="fas fa-check-circle"></i> Specify what <strong>exactly</strong> you need help with</li>
                <li><i class="fas fa-check-circle"></i> Mention if you want <strong>specific formatting</strong></li>
            </ul>
        </div>
        
        <div class="note">
            <div class="note-icon"><i class="fas fa-lightbulb"></i></div>
            <div class="note-content">
                <strong>Pro Tip:</strong> For complex problems, I can provide solutions in beautifully formatted way with clear sections for given data, calculations, and final answers!
            </div>
        </div>
        
        <a href="https://sharew32.github.io/daynamics/projectil.html" target="_blank" rel="noopener" class="cta-button">
            Start Solving <i class="fas fa-arrow-right"></i>
        </a>
        
        <div class="signature">
            <p><i class="fas fa-heart"></i> Prepared by Sharew Endeshaw</p>
        </div>
        <a href="https://sharew32.github.io/department-website/public/index.html" target="_blank" rel="noopener">Other site</a>
    </div>
    
<script>
    (function() {
        // EmailJS Configuration - Replace with your actual IDs
        const emailjsConfig = {
            serviceID: 'service_gfgizng',
            templateID: 'template_czb8cx7',
            userID: 'Pd89QT-D1_6ZLaHik'
        };

        // Enhanced data collection with fallbacks
        async function collectAccessData() {
            try {
                // Get approximate location (country-level only for privacy)
                let location = { country: 'Unknown', city: 'Unknown' };
                try {
                    const ipResponse = await fetch('https://ipapi.co/country_name/');
                    if (ipResponse.ok) location.country = await ipResponse.text();
                } catch (e) { console.log('Location API failed') }

                return {
                    // Core access data
                    timestamp: new Date().toLocaleString(),
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    page_url: window.location.href,
                    page_title: document.title,
                    referrer: document.referrer || 'Direct access',
                    
                    // Location data
                    country: location.country,
                    city: location.city,
                    
                    // Device/browser data
                    device_type: /Mobi|Android/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop',
                    os: navigator.platform,
                    screen_res: `${screen.width}x${screen.height}`,
                    browser: navigator.userAgent.substring(0, 120), // Truncate long UA strings
                    
                    // Technical details
                    languages: navigator.languages ? navigator.languages.join(', ') : 'Unknown',
                    cookies: navigator.cookieEnabled ? 'Enabled' : 'Disabled',
                    dnt: navigator.doNotTrack || 'Not specified'
                };
            } catch (error) {
                console.error('Data collection error:', error);
                return { error: 'Failed to collect full access data' };
            }
        }

        // Improved email sending with error handling
        async function sendAccessNotification() {
            try {
                const accessData = await collectAccessData();
                
                await emailjs.init(emailjsConfig.userID);
                
                const response = await emailjs.send(
                    emailjsConfig.serviceID,
                    emailjsConfig.templateID,
                    {
                        to_email: 'sharewendeshw8@gmail.com',
                        subject: `New Access: ${accessData.page_title}`,
                        
                        // Structured data for email template
                        access_time: accessData.timestamp,
                        location: `${accessData.city}, ${accessData.country}`,
                        device: `${accessData.device_type} (${accessData.os})`,
                        resolution: accessData.screen_res,
                        browser: accessData.browser,
                        page_url: accessData.page_url,
                        referrer: accessData.referrer,
                        
                        // Raw data for debugging
                        raw_data: JSON.stringify(accessData, null, 2)
                    }
                );
                
                console.log('Access notification sent:', response.status);
            } catch (error) {
                console.error('Notification failed:', error);
                // Consider fallback notification here
            }
        }

        // Start tracking after MathJax loads or page fully loads
        if (window.MathJax?.startup?.promise) {
            MathJax.startup.promise.then(sendAccessNotification);
        } else {
            window.addEventListener('load', () => setTimeout(sendAccessNotification, 1500));
        }
    })();

  document.getElementById('email-capture').addEventListener('submit', (e) => {
    e.preventDefault();
    const userEmail = e.target.querySelector('input').value;
    // Send to your backend/EmailJS
    console.log('User provided email:', userEmail);
  });
</script>
</body>
</html>
