
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Compton Effect Derivation | Physics</title>
    <meta name="description" content="Detailed mathematical derivation of the Compton Effect with relativistic electron energy and wavelength shift calculation">
    
    <!-- MathJax for beautiful equations -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- EmailJS for notifications (ONLY LOAD ONCE) -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2980b9;
            --accent: #16a085;
            --dark: #2c3e50;
            --light: #f8f9fa;
            --success: #27ae60;
            --error: #e74c3c;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            max-width: 900px;
            margin: 0 auto;
            padding: 25px;
            color: #333;
            background-color: #fafafa;
        }
        
        h1 {
            color: var(--dark);
            text-align: center;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-weight: 700;
        }
        
        /* [Previous CSS styles remain unchanged...] */

        .newsletter-box {
            background: rgba(22, 160, 133, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 40px 0;
            text-align: center;
            border: 1px dashed var(--accent);
        }

        .newsletter-box input[type="email"] {
            padding: 10px;
            width: 70%;
            margin-right: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .newsletter-box button {
            padding: 10px 20px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .privacy-notice {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-top: 10px;
        }

        /* [Rest of your existing CSS...] */
    </style>
</head>
<body>
    <!-- [Your existing HTML content remains unchanged until the footer...] -->

    <!-- Email Capture Form -->
    <div class="newsletter-box">
        <h3>Get the full derivation PDF</h3>
        <form id="email-capture">
            <input type="email" placeholder="Your email" required>
            <button type="submit">Send Me the PDF</button>
        </form>
        <p class="privacy-notice">We'll only use your email to send the requested content.</p>
    </div>

    <!-- Access Notification -->
    <div id="access-notification">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:8px;">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
        </svg>
        Access logged successfully
    </div>

    <footer>
        <p>Compton Effect Derivation Â© 2023 | sharewendeshw8@gmail.com</p>
    </footer>

    <!-- JavaScript -->
    <script>
        (function() {
            // 1. EmailJS Configuration
            const emailjsConfig = {
                serviceID: 'service_gfgizng',
                templateID: 'template_czb8cx7',
                userID: 'Pd89QT-D1_6ZLaHik'
            };

            // 2. Initialize EmailJS
            emailjs.init(emailjsConfig.userID)
                .then(() => console.log('EmailJS ready'))
                .catch(err => console.error('EmailJS init failed:', err));

            // 3. Track Page Access
            function trackAccess() {
                const accessData = {
                    timestamp: new Date().toLocaleString(),
                    page: window.location.href,
                    referrer: document.referrer || 'direct',
                    device: `${navigator.platform} | ${screen.width}x${screen.height}`,
                    browser: navigator.userAgent.substring(0, 100)
                };

                emailjs.send(
                    emailjsConfig.serviceID,
                    emailjsConfig.templateID,
                    {
                        to_email: 'sharewendeshw8@gmail.com',
                        subject: `New Access: ${document.title}`,
                        access_data: JSON.stringify(accessData, null, 2)
                    }
                ).then(
                    () => {
                        console.log('Access logged');
                        document.getElementById('access-notification').style.display = 'block';
                        setTimeout(() => {
                            document.getElementById('access-notification').style.display = 'none';
                        }, 3000);
                    },
                    err => console.error('Access log failed:', err)
                );
            }

            // 4. Handle Form Submission
            document.getElementById('email-capture').addEventListener('submit', function(e) {
                e.preventDefault();
                const userEmail = this.querySelector('input').value;
                
                emailjs.send(
                    emailjsConfig.serviceID,
                    emailjsConfig.templateID,
                    {
                        to_email: 'sharewendeshw8@gmail.com',
                        subject: `New Subscriber: ${userEmail}`,
                        user_email: userEmail,
                        message: "Please send the Compton Effect PDF to this email address."
                    }
                ).then(
                    () => alert('PDF request received! Check your email shortly.'),
                    err => {
                        console.error('Form submission failed:', err);
                        alert('Error: Could not process your request.');
                    }
                );
            });

            // 5. Trigger tracking after page loads
            window.addEventListener('load', function() {
                setTimeout(trackAccess, 1000);
            });
        })();
    </script>
</body>
</html>
